warning: [Circus] FnMut is not supported
  --> src/mini_ledger_core/src/balances.rs:18:12
   |
18 |         F: FnMut(Option<&Tokens>) -> Result<Tokens, E>;
   |            ^^^^^

warning: [Circus] FnMut is not supported
  --> src/mini_ledger_core/src/balances.rs:28:12
   |
28 |         F: FnMut(Option<&Tokens>) -> Result<Tokens, E>, // TODO[FK]: FnMut is disallowed - this can be rewritten
   |            ^^^^^

warning: [Circus] Mutable self is not supported
  --> src/mini_ledger_core/src/balances.rs:26:21
   |
26 |     fn update<F, E>(&mut self, k: AccountId, mut f: F) -> Result<Tokens, E>
   |                     ^^^^^^^^^

warning: [Circus] Mutable self is not supported
  --> src/mini_ledger_core/src/balances.rs:95:9
   |
95 |         &mut self, // TODO[FK]: not allowed for now but will be in the future
   |         ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger_core/src/balances.rs:115:17
    |
115 |     pub fn burn(&mut self, from: &AccountId, amount: Tokens) -> Result<(), BalanceError> {
    |                 ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger_core/src/balances.rs:121:17
    |
121 |     pub fn mint(&mut self, to: &AccountId, amount: Tokens) -> Result<(), BalanceError> {
    |                 ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger_core/src/balances.rs:129:18
    |
129 |     pub fn debit(&mut self, from: &AccountId, amount: Tokens) -> Result<Tokens, BalanceError> {
    |                  ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger_core/src/balances.rs:150:19
    |
150 |     pub fn credit(&mut self, to: &AccountId, amount: Tokens) {
    |                   ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger_core/src/tokens.rs:136:19
    |
136 |     fn add_assign(&mut self, other: Self) {
    |                   ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger_core/src/tokens.rs:156:19
    |
156 |     fn sub_assign(&mut self, other: Self) {
    |                   ^^^^^^^^^

warning: `mini-ledger-core` (lib) generated 10 warnings
warning: [Circus] Mutable self is not supported
  --> src/mini_ledger/src/hash.rs:23:18
   |
23 |     pub fn write(&mut self, data: &[u8]) {
   |                  ^^^^^^^^^

warning: [Circus] loop and while are not supported
  --> src/mini_ledger/src/hash.rs:52:13
   |
52 |             loop {
   |             ^^^^

warning: [Circus] Explicit lifetimes are not supported
  --> src/mini_ledger/src/transaction.rs:27:27
   |
27 | pub fn de_compact_account<'de, D>(d: D) -> Result<Account, D::Error>
   |                           ^^^

warning: [Circus] Explicit lifetimes are not supported
   --> src/mini_ledger/src/transaction.rs:144:27
    |
144 | fn deserialize_memo_bytes<'de, D>(d: D) -> Result<ByteBuf, D::Error>
    |                           ^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger/src/lib.rs:145:25
    |
145 |     pub fn add_block<B>(&mut self, block: B) -> Result<BlockIndex, String>
    |                         ^^^^^^^^^

warning: [Circus] loop and while are not supported
   --> src/mini_ledger/src/lib.rs:232:5
    |
232 |     while let Some(tx_info) = ledger.transactions_by_height().front() {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger/src/lib.rs:614:21
    |
614 |     fn balances_mut(&mut self) -> &mut Balances<Self::AccountId, HashMap<Self::AccountId, Tokens>> {
    |                     ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger/src/lib.rs:622:23
    |
622 |     fn blockchain_mut(&mut self) -> &mut Blockchain {
    |                       ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger/src/lib.rs:630:33
    |
630 |     fn transactions_by_hash_mut(&mut self) -> &mut BTreeMap<HashOf<Self::Transaction>, BlockIndex> {
    |                                 ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger/src/lib.rs:638:35
    |
638 |     fn transactions_by_height_mut(&mut self) -> &mut VecDeque<TransactionInfo<Self::Transaction>> {
    |                                   ^^^^^^^^^

warning: [Circus] Mutable self is not supported
   --> src/mini_ledger/src/lib.rs:642:30
    |
642 |     fn on_purged_transaction(&mut self, _height: BlockIndex) {}
    |                              ^^^^^^^^^

warning: `mini-ledger` (lib) generated 11 warnings
warning: [Circus] Unsafe code is not supported
  --> src/mini_ledger/src/main.rs:17:1
   |
17 | / thread_local! {
18 | |     static LEDGER: RefCell<Option<Ledger>> = RefCell::new(None);
19 | | }
   | |_^
   |
   = note: this warning originates in the macro `$crate::__thread_local_inner` which comes from the expansion of the macro `thread_local` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: [Circus] Trait objects are not supported
  --> src/mini_ledger/src/main.rs:43:26
   |
43 |     fn with_ledger<R>(f: impl FnOnce(&Ledger) -> R) -> R {
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: [Circus] Trait objects are not supported
  --> src/mini_ledger/src/main.rs:52:30
   |
52 |     fn with_ledger_mut<R>(f: impl FnOnce(&mut Ledger) -> R) -> R {
   |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: [Circus] loop and while are not supported
   --> src/mini_ledger/src/main.rs:121:1
    |
121 | #[update]
    | ^^^^^^^^^

warning: [Circus] Async and await are not supported
   --> src/mini_ledger/src/main.rs:123:1
    |
123 | / async fn icrc1_transfer(arg: TransferArg) -> Result<Nat, TransferError> {
124 | |     let block_idx = Access::with_ledger_mut(|ledger| {
125 | |         let now = TimeStamp::from_nanos_since_unix_epoch(ic_cdk::api::time());
126 | |         let created_at_time = arg
...   |
198 | |     Ok(Nat::from(block_idx))
199 | | }
    | |_^

warning: `mini-ledger` (bin "mini-ledger") generated 7 warnings (2 duplicates)
    Finished dev [unoptimized + debuginfo] target(s) in 0.10s
